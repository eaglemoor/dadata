go_import_path: gopkg.in/webdeskltd/dadata.v2
language: go
sudo: false

go:
  - "1.7.x"
  - "1.8.x"
  - "1.9.x"
  - "1.10.x"
  - "1.11.x"
  - master

env:
  - GO111MODULE=on

matrix:
  include:
    - go: "1.11.x"
      script:
        - go mod tidy
        - go test -v -mod=vendor ./...

install: true

branches:
  only:
  - v2
  - master

notifications:
  email:
    on_success: change
    on_failure: always

script:
  - go install ./...
  - diff -u <(echo -n) <(gofmt -d .)
  - go test -v ./...
